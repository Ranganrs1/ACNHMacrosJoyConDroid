(this["webpackJsonpacnh-macros-joycondroid"]=this["webpackJsonpacnh-macros-joycondroid"]||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=a(6),c=a.n(o),l=a(1),u=a(2),d=a(3),m=a(5),h=a(4),p=a(7),g=(a(16),0),v=1,f=2,y=3;function b(e){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.next=3,fetch(t).then((function(e){return e.json()}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){var t={};return e.selected&&(t={filter:"brightness(70%)"}),r.a.createElement("div",{className:"player-button",id:e.name,onClick:function(t){return e.clickHandler()}},r.a.createElement("img",{className:"icon",src:e.src,alt:e.name+" Button Icon",style:t}))}function E(e){var t={};return e.selected&&(t={filter:"brightness(70%)"}),r.a.createElement("div",{className:"macro"},r.a.createElement("div",{className:"macro-button",id:e.name,style:t,onClick:function(t){return e.clickHandler(e.index)}},r.a.createElement("img",{className:"icon",src:e.src,alt:"Icon "+e.name})),r.a.createElement("label",{className:"macro-button-label"},e.name))}function S(e){var t={width:"".concat(e.percentage,"%")};return r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{className:"filler",style:t}))}function C(e){return r.a.createElement("div",{key:e.ind,className:"key-log"},r.a.createElement("b",{className:"key-log-cell"}," ",e.index," "),r.a.createElement("b",{className:"key-log-cell"}," ",e.pressedKey," "),r.a.createElement("b",{className:"key-log-cell"}," ",e.start," "),r.a.createElement("b",{className:"key-log-cell"}," ",e.duration," "))}var w=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){return this.props.onChange(this.props.paramKey,e.target.checked)}},{key:"render",value:function(){return r.a.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.handleChange})}}]),a}(r.a.Component),L=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){if(""!==e.target.value){var t=Math.min(e.currentTarget.value,this.props.max);this.props.onChange(parseInt(t))}else this.props.onChange(1)}},{key:"render",value:function(){return r.a.createElement("input",{type:"number",className:"integer-input",readOnly:this.props.readonly,value:this.props.value,onChange:this.handleChange,max:this.props.max,min:this.props.min})}}]),a}(r.a.Component),x=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){""!==e.target.value?this.props.onChange(parseInt(e.currentTarget.value)):this.props.onChange(0)}},{key:"renderOptions",value:function(){return this.props.options.map((function(e,t){return r.a.createElement("option",{key:"option"+t.toString(),value:t},e)}))}},{key:"render",value:function(){var e=this.renderOptions();return r.a.createElement("select",{className:"drop-down-list",onChange:this.handleChange},e)}}]),a}(r.a.Component),N=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={active:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.parameters;switch(this.props.macro){default:return r.a.createElement("div",{className:"macro-parameters",id:"DefaultParams"});case"Time Skip":return r.a.createElement("div",{className:"macro-parameters",id:"TimeSkipParams"},r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Skip Count"),r.a.createElement("div",{className:"parameter"},r.a.createElement(L,{id:"daysToAdvance",name:"days-to-advance",value:t.daysToAdvance,onChange:function(t){return e.props.eventHandler("daysToAdvance",t)},min:"1",max:"10000"}))),r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Date Format"),r.a.createElement("div",{className:"parameter"},r.a.createElement(x,{id:"dateFormat",name:"date-format",value:t.dateFormat,options:["World","US","Chinese"],onChange:function(t){return e.props.eventHandler("dateFormat",t)}}))));case"Loto ID":return r.a.createElement("div",{className:"macro-parameters",id:"LottoIDParams"},r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"First Day Loto"),r.a.createElement("div",{className:"parameter"},r.a.createElement(w,{id:"firstDayLoto",name:"first-day-loto",checked:t.getFirst,paramKey:"getFirst",onChange:this.props.eventHandler}))),r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Attempts"),r.a.createElement("div",{className:"parameter"},r.a.createElement(L,{id:"Attempts",name:"lotto-id-attempts",value:t.attempts,onChange:function(t){return e.props.eventHandler("attempts",t)},min:"0",max:"10000"}))),r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Date Format"),r.a.createElement("div",{className:"parameter"},r.a.createElement(x,{id:"dateFormat",name:"date-format",value:t.dateFormat,options:["World","US","Chinese"],onChange:function(t){return e.props.eventHandler("dateFormat",t)}}))));case"Wonder Box":return r.a.createElement("div",{className:"macro-parameters",id:"WonderBoxParams"},r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Count"),r.a.createElement("div",{className:"parameter"},r.a.createElement(L,{id:"WTradeCount",name:"wonder-trade-count",value:t.count,onChange:function(t){return e.props.eventHandler("count",t)},min:"1",max:"30"}))),r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Wait Time"),r.a.createElement("div",{className:"parameter"},r.a.createElement(L,{id:"WTradeWaitTime",name:"wonder-trade-wait-time",value:t.waitTime,onChange:function(t){return e.props.eventHandler("waitTime",t)},min:"2",max:"600"}))));case"Egg Hatcher":return r.a.createElement("div",{className:"macro-parameters",id:"EggHatcherParams"},r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Egg Cycles"),r.a.createElement("div",{className:"parameter"},r.a.createElement(x,{id:"eggCycles",name:"egg-cycles",value:t.eggCycles.toString(),options:["5","10","15","20","25","30","35","40"],onChange:function(t){return e.props.eventHandler("eggCycles",t)}}))),r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Hatching Ability"),r.a.createElement("div",{className:"parameter"},r.a.createElement(w,{id:"hasHatchAbility",name:"hatch-ability",checked:t.ability,paramKey:"ability",onChange:this.props.eventHandler}))),r.a.createElement("div",{className:"parameters-entry"},r.a.createElement("label",{className:"parameter-label"},"Eggs in Box"),r.a.createElement("div",{className:"parameter"},r.a.createElement(L,{id:"eggsInBox",name:"eggs-in-box",value:t.eggsInBox,onChange:function(t){return e.props.eventHandler("eggsInBox",t)},min:"1",max:"30"}))))}}}]),a}(r.a.Component),M=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e={display:"none"};this.props.show&&(e.display="flex");for(var t=[],a=0;a<this.props.sections.length;a++){var n=this.props.sections[a];t[a]=r.a.createElement("div",{className:"infoSection",key:"infoSect_"+a.toString()},r.a.createElement("h2",{className:"infoSectionTitle"}," ",n.title," "),n.text)}return r.a.createElement("div",{id:"infoOverlay",className:"info-overlay",style:e},r.a.createElement("div",{id:"infoOverlayOut",onMouseDown:this.props.onMouseDown,onTouchStart:this.props.onTouchStart}),r.a.createElement("div",{id:"infoTextBox",className:"text-box"},r.a.createElement("h1",{className:"infoTextTitle"}," ",this.props.title," "),t))}}]),a}(r.a.Component);var O=function(){function e(){Object(l.a)(this,e),this.segments={FstSkip:{filename:"FirstSkip.json",object:""},FstSkipUS:{filename:"FirstSkipUS.json",object:""},FstSkipCHN:{filename:"FirstSkipCHN.json",object:""},AdvDay:{filename:"AdvanceDay.json",object:""},AdvDayUS:{filename:"AdvanceDayUS.json",object:""},AdvDayCHN:{filename:"AdvanceDayCHN.json",object:""},LotoID:{filename:"LotoID.json",object:""},Universal:{filename:"UniversalSkip.json",object:""},UniversalUS:{filename:"UniversalSkipUS.json",object:""},UniversalCHN:{filename:"UniversalSkipCHN.json",object:""},OpenBox:{filename:"OpenBox.json",object:""},SelectInBox:{filename:"SelectInBox.json",object:""},PlaceInBox:{filename:"PlaceInBox.json",object:""},StartWonder:{filename:"StartWonderTrade.json",object:""},EndWonder:{filename:"ConcludeWonderTrade.json",object:""},Hatching:{filename:"Hatching.json",object:""},Crafting:{filename:"Crafting.json",object:""}};var t=Object.entries(this.segments);this.loadedCount=0,this.segmentCount=t.length,this.loadConcluded=!1;for(var a=0;a<this.segmentCount;a++)this.loadMacro(t[a][0])}return Object(u.a)(e,[{key:"loadMacro",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.segments[t],e.next=3,b("./macros/"+a.filename);case 3:a.object=e.sent,this.loadedCount+=1,this.loadedCount===this.segmentCount&&(this.loadConcluded=!0,console.log("JSON Load Concluded"));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMacro",value:function(e){var t=this.segments[e];return JSON.parse(JSON.stringify(t.object))}}]),e}(),P=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e,"Crafting","./images/DIYIcon.png")).loopMode=!0,n.parameters.count=1,n.onCountChange=n.onCountChange.bind(Object(d.a)(n)),n.paramHandlers={count:n.onCountChange};var s=r.a.createElement("p",null,"Presses A repeatedly to craft items."),i=r.a.createElement("p",null,"Open your workbench and navigate to the item you want to craft. Start the script.");return n.info=[{title:"Description",text:s},{title:"How to Use",text:i}],n}return Object(u.a)(a,[{key:"onCountChange",value:function(e){return this.parameters.count!==e&&(this.parameters.count=e,!0)}},{key:"build",value:function(){if(!this.jsonManager.loadConcluded)return null;this.macroJSON=[];for(var e=0;e<this.parameters.count;e++)this.concatToMacro(this.getMacro("Crafting"));return this.macro=new T(this.name,this.icon,this.macroJSON,this.loopMode),this.macro}}]),a}(function(){function e(t,a,n){Object(l.a)(this,e),this.jsonManager=t,this.name=a,this.icon=n,this.macro=0,this.macroJSON=[],this.parameters={},this.paramHandlers={},this.info=[]}return Object(u.a)(e,[{key:"changeParameter",value:function(e,t){return(0,this.paramHandlers[e])(t)}},{key:"getMacro",value:function(e){return this.jsonManager.loadConcluded?this.jsonManager.getMacro(e):null}},{key:"concatToMacro",value:function(e){this.macroJSON=this.macroJSON.concat(e)}},{key:"getRenderData",value:function(){return{name:this.name,icon:this.icon,parameters:this.parameters,info:this.info}}}]),e}()),T=function(){function e(t,a,n,r){var s;for(Object(l.a)(this,e),this.name=t,this.icon=a,this.loopMode=!0===r,this.state=g,this.commands=[],this.onWait=!1,this.runner=null,this.segments=n,this.totalSteps=0,this.currentOverallStep=0,this.totalTime=0,s=0;s<this.segments.length;s++){var i,o=this.segments[s],c=0;for(i=0;i<o.macro.length;i++){c+=o.macro[i].count}this.totalSteps+=c*o.count}}return Object(u.a)(e,[{key:"progress",value:function(){return 0===this.totalSteps||this.loopMode?1:this.currentOverallStep/this.totalSteps}},{key:"startRunner",value:function(){var e=c.a.mark((function e(){var t,a,n,r,s,i,o,l,u,d,m,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentOverallStep=0,t={state:this.state,abort:!1},a=0;case 3:if(!(a<this.segments.length)){e.next=68;break}n=this.segments[a],r=n.macro,s=n.count,i=0;case 8:if(!(i<s)){e.next=65;break}o=0;case 10:if(!(o<r.length)){e.next=61;break}case 11:if(this.state===v){e.next=20;break}return void(e.next=14);case 14:if(!(t=e.sent).abort){e.next=17;break}return e.abrupt("return");case 17:this.state=t.state,e.next=11;break;case 20:l=r[o],u=this.makeCommand(l.button,!0,l.strength,l.angle),d=this.makeCommand(l.button,!1,0,0),m=void 0===l.block||!0===l.block,h=0,h=0;case 26:if(!(h<l.count)){e.next=58;break}return this.commands.push(u),this.timedCommand(d,m,Math.max(l.onTime,20)),e.next=31,this.commands;case 31:this.commands=[];case 32:if(!this.onWait){e.next=41;break}return void(e.next=35);case 35:if(!(t=e.sent).abort){e.next=38;break}return e.abrupt("return");case 38:this.state=t.state,e.next=32;break;case 41:return!0===m&&l.offTime>0&&(this.onWait=!0,this.timedCommand(null,m,Math.max(l.offTime,20))),e.next=44,this.commands;case 44:this.commands=[];case 45:if(!this.onWait&&this.state!==f){e.next=54;break}return void(e.next=48);case 48:if(!(t=e.sent).abort){e.next=51;break}return e.abrupt("return");case 51:this.state=t.state,e.next=45;break;case 54:this.currentOverallStep++;case 55:h++,e.next=26;break;case 58:o++,e.next=10;break;case 61:this.loopMode&&i--;case 62:i++,e.next=8;break;case 65:a++,e.next=3;break;case 68:return e.abrupt("return");case 69:case"end":return e.stop()}}),e,this)}));this.runner=function(e,t){var a=e.apply(t);return a.next(),function(e){return a.next(e)}}(e,this)}},{key:"makeCommand",value:function(e,t,a,n){return{button:e,pressed:t,strength:a,angle:n}}},{key:"timedCommand",value:function(e,t,a){setTimeout(this.issueCommand,a,this,e,t),this.onWait=t}},{key:"issueCommand",value:function(e,t,a){null!==t&&e.commands.push(t),a&&(e.onWait=!1)}},{key:"reset",value:function(){this.state=g,this.onWait&&(this.onWait=!1,clearTimeout(this.waitTimeout),this.waitTimeout=null),this.currentOverallStep=0,null!==this.runner&&(this.runner({state:this.state,abort:!0}),this.runner=null)}},{key:"toString",value:function(){for(var e="Macro - \n",t=0;t<this.segments.length;t++){var a=this.segments[t];e+="\t"+a.name+" x"+a.count.toString()+"\n"}return e}}]),e}(),J=function(){function e(){Object(l.a)(this,e),this.state={selectedMacro:0,playState:0,macroProgress:0,loadConcluded:!1},this.jsonManager=new O,this.builders=[],this.builders[0]=new P(this.jsonManager);var t=this.builders.length;this.dirtyMacro=Array(t).fill(!1),this.macros=Array(t).fill(null),this.selectMacro=this.selectMacro.bind(this),this.changeParameter=this.changeParameter.bind(this)}return Object(u.a)(e,[{key:"checkLoadConcluded",value:function(){var e=this.jsonManager.loadConcluded;if(e){for(var t=0;t<this.builders.length;t++)this.buildMacro(t),null!==this.macros[t]&&void 0!==this.macros[t]||(e=!1);this.state.loadConcluded=e}}},{key:"selectMacro",value:function(e){if(this.state.selectedMacro===e)return!1;new Audio("/click.mp3").play();var t=this.macros[this.state.selectedMacro];return t.state!==g&&(t.reset(),this.state.playState=g,this.state.macroProgress=0),this.state.selectedMacro=e,!0}},{key:"changeParameter",value:function(e,t){this.builders[this.state.selectedMacro].changeParameter(e,t)&&(this.dirtyMacro[this.state.selectedMacro]=!0)}},{key:"play",value:function(){var e=this.state.selectedMacro,t=this.macros[e],a=this.dirtyMacro[e];switch(t.state){default:case v:case f:break;case g:case y:t.state===y&&t.reset(),a&&(this.dirtyMacro[e]=!1,this.buildMacro(e),t=this.macros[e]),t.startRunner()}return t.state=v,this.state.playState=v,!0}},{key:"pause",value:function(){var e=this.macros[this.state.selectedMacro];return e.state===v&&(e.state=f,this.state.playState=f,!0)}},{key:"reset",value:function(){var e=this.macros[this.state.selectedMacro];return e.state!==g&&(e.reset(),this.state.playState=g,this.state.macroProgress=0,!0)}},{key:"getMacroState",value:function(){return{macroState:this.state.playState,macroProgress:this.state.macroProgress}}},{key:"getAllMacroData",value:function(){for(var e=[],t=0;t<this.builders.length;t++){var a=this.builders[t];e[t]=a.getRenderData()}return e}},{key:"getCurrentMacroData",value:function(){return this.builders[this.state.selectedMacro].getRenderData()}},{key:"buildMacro",value:function(e){var t=this.builders[e].build(this.parameters);this.macros[e]=t,console.log(t.toString())}},{key:"updateMacros",value:function(){for(var e=0;e<this.macroBuilders.length;e++){this.macroParamsDirty[e]&&(this.buildMacro(e),this.macroParamsDirty[e]=!1)}}},{key:"update",value:function(){var e=void 0;if(this.state.loadConcluded||this.checkLoadConcluded(),this.state.loadConcluded){var t=void 0,a=this.macros[this.state.selectedMacro];if(void 0===a||null===a)return;switch(a.state){default:case g:case y:return;case v:case f:t=a.runner({state:a.state,abort:!1})}void 0!==t&&(void 0!==t.value&&(e=t.value),t.done&&(a.state=y)),this.state.playState=a.state,this.state.macroProgress=100*a.progress()}return e}}]),e}(),_=function(){function e(){Object(l.a)(this,e),this.keys={a:{pressed:!1,pendingLog:null},b:{pressed:!1,pendingLog:null},x:{pressed:!1,pendingLog:null},y:{pressed:!1,pendingLog:null},l:{pressed:!1,pendingLog:null},lsl:{pressed:!1,pendingLog:null},lsr:{pressed:!1,pendingLog:null},r:{pressed:!1,pendingLog:null},rsl:{pressed:!1,pendingLog:null},rsr:{pressed:!1,pendingLog:null},plus:{pressed:!1,pendingLog:null},minus:{pressed:!1,pendingLog:null},up:{pressed:!1,pendingLog:null},right:{pressed:!1,pendingLog:null},left:{pressed:!1,pendingLog:null},down:{pressed:!1,pendingLog:null},left_stick:{pressed:!1,pendingLog:null},right_stick:{pressed:!1,pendingLog:null},left_stick_dir:{pressed:!1,pendingLog:null},right_stick_dir:{pressed:!1,pendingLog:null},home:{pressed:!1,pendingLog:null}},this.startTime=0,this.log=[],this.log_count=0}return Object(u.a)(e,[{key:"clear",value:function(){this.keys={a:{pressed:!1,pendingLog:null},b:{pressed:!1,pendingLog:null},x:{pressed:!1,pendingLog:null},y:{pressed:!1,pendingLog:null},l:{pressed:!1,pendingLog:null},lsl:{pressed:!1,pendingLog:null},lsr:{pressed:!1,pendingLog:null},r:{pressed:!1,pendingLog:null},rsl:{pressed:!1,pendingLog:null},rsr:{pressed:!1,pendingLog:null},plus:{pressed:!1,pendingLog:null},minus:{pressed:!1,pendingLog:null},up:{pressed:!1,pendingLog:null},right:{pressed:!1,pendingLog:null},left:{pressed:!1,pendingLog:null},down:{pressed:!1,pendingLog:null},left_stick:{pressed:!1,pendingLog:null},right_stick:{pressed:!1,pendingLog:null},left_stick_dir:{pressed:!1,pendingLog:null},right_stick_dir:{pressed:!1,pendingLog:null},home:{pressed:!1,pendingLog:null}},this.startTime=0,this.log=[],this.log_count=0}},{key:"pressKey",value:function(e,t){if("buffer"!==e){var a=this.keys[e];!1===a.pressed&&(a.pressed=!0,0===this.startTime&&(this.startTime=t),a.pendingLog=this.addLogEntry(e,t-this.startTime)),this.keys[e]=a}}},{key:"addLogEntry",value:function(e,t){var a={index:this.log_count,key:e,start:t,duration:0};return this.log[this.log_count]=a,this.log_count++,a}},{key:"releaseKey",value:function(e,t){if("buffer"!==e){var a=this.keys[e];if(!0===a.pressed){a.pressed=!1;var n=a.pendingLog;a.pendingLog=null,n.duration=t-n.start-this.startTime,this.log[n.index]=n}}}},{key:"getPressed",value:function(){var e=[];for(var t in this.keys){!0===this.keys[t].pressed&&e.push(t)}return e}},{key:"update",value:function(e,t){var a=(new Date).getTime();t?this.pressKey(e,a):this.releaseKey(e,a)}},{key:"renderPressed",value:function(){for(var e=Object.entries(this.keys),t=[],a=0,n=0;n<e.length;n++){var s=e[n];!0===s[1].pressed&&(t[a]=r.a.createElement("div",{className:"pressedKey",key:s[0]},s[0]),a++)}return r.a.createElement("div",{id:"PressedKeys"},r.a.createElement("b",null," Pressed "),t)}},{key:"renderLogged",value:function(){var e=[];if(this.log_count>0)for(var t=0;t<Math.min(3,this.log_count);t++){var a=this.log[this.log_count-(t+1)];e.push(r.a.createElement(C,{key:"keylog_"+t,index:a.index.toString(),pressedKey:a.key,start:a.start,duration:a.duration}))}return r.a.createElement("div",{id:"KeyLogs"},e)}}]),e}(),D=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.onButtonEvent=n.onButtonEvent.bind(Object(d.a)(n)),n.selectMacro=n.selectMacro.bind(Object(d.a)(n)),n.parameterChange=n.parameterChange.bind(Object(d.a)(n)),n.macroPlayer=new J,n.keyLogger=new _,n.currentTime=0,n.state={selectedMacro:0,macroState:-1,macroProgress:0,displayInfo:!1},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.UpdateTimerId=setInterval((function(){return e.update()}),20)}},{key:"componentWillUnmount",value:function(){clearInterval(this.UpdateTimerId)}},{key:"update",value:function(){this.currentTime+=20;var e,t=this.macroPlayer.update(this.currentTime);if(this.setState(this.macroPlayer.getMacroState()),void 0!==t)for(e=0;e<t.length;e++){var a=t[e];"right_stick_dir"===a.button||"left_stick_dir"===a.button?this.handleSwitchJoySticks(a.button,a.strength,a.angle):this.handleSwitchKeys(a.button,a.pressed),this.keyLogger.update(a.button,a.pressed)}}},{key:"onButtonEvent",value:function(e){switch(new Audio("/click.mp3").play(),e){default:return;case"play":this.macroPlayer.play();break;case"pause":this.macroPlayer.pause();break;case"reset":if(this.macroPlayer.reset()){var t,a=this.keyLogger.getPressed();for(t=0;t<a.length;t++){var n=a[t];"left_stick_dir"===n||"right_stick_dir"===n?this.handleSwitchJoySticks(n,0,0):this.handleSwitchKeys(n,!1)}this.keyLogger.clear()}break;case"info":var r=!this.state.displayInfo;this.setState({displayInfo:r})}this.setState(this.macroPlayer.getMacroState())}},{key:"selectMacro",value:function(e){this.macroPlayer.selectMacro(e)&&this.keyLogger.clear()}},{key:"parameterChange",value:function(e,t){this.macroPlayer.changeParameter(e,t)}},{key:"handleSwitchJoySticks",value:function(e,t,a){var n=function(e){return e*(Math.PI/180)}(a);void 0!==window.joyconJS&&("right_stick_dir"===e&&window.joyconJS.onRightJoystick(t,n),"left_stick_dir"===e&&window.joyconJS.onLeftJoystick(t,n))}},{key:"handleSwitchKeys",value:function(e,t){void 0!==window.joyconJS&&("minus"===e&&window.joyconJS.onMinus(t),"left-stick"===e&&window.joyconJS.onLeftJoystickPressed(t),"up"===e&&window.joyconJS.onUp(t),"right"===e&&window.joyconJS.onRight(t),"down"===e&&window.joyconJS.onDown(t),"left"===e&&window.joyconJS.onLeft(t),"l"===e&&window.joyconJS.onL(t),"lsl"===e&&window.joyconJS.onLeftSL(t),"lsr"===e&&window.joyconJS.onLeftSR(t),"plus"===e&&window.joyconJS.onPlus(t),"a"===e&&window.joyconJS.onA(t),"b"===e&&window.joyconJS.onB(t),"x"===e&&window.joyconJS.onX(t),"y"===e&&window.joyconJS.onY(t),"r"===e&&window.joyconJS.onR(t),"rsl"===e&&window.joyconJS.onRightSL(t),"rsr"===e&&window.joyconJS.onRightSR(t),"right-stick"===e&&window.joyconJS.onRightJoystickPressed(t),"home"===e&&window.joyconJS.onHome(t))}},{key:"renderMacros",value:function(){var e=this;if(!this.macroPlayer.state.loadConcluded)return r.a.createElement("b",null," Loading ");var t=this.macroPlayer.state.selectedMacro,a=this.macroPlayer.getAllMacroData(),n=-1;return a.map((function(a){n++;var s=t===n;return r.a.createElement(E,{key:"macro_"+n.toString(),index:n,selected:s,name:a.name,src:a.icon,clickHandler:e.selectMacro})}))}},{key:"renderParameters",value:function(){if(!this.macroPlayer.state.loadConcluded)return r.a.createElement("b",null," Loading ");var e=this.macroPlayer.getCurrentMacroData();return r.a.createElement(N,{key:"macroParams",macro:e.name,parameters:e.parameters,eventHandler:this.parameterChange})}},{key:"renderInfo",value:function(){var e=this,t=this.macroPlayer.getCurrentMacroData(),a=t.name,n=t.info;return r.a.createElement("div",{id:"Info"},r.a.createElement("button",{className:"info-button",id:"InfoButton",onMouseDown:function(t){return e.onButtonEvent("info",!0)},onTouchStart:function(t){return e.onButtonEvent("info",!0)}},"Info"),r.a.createElement(M,{show:this.state.displayInfo,title:a,sections:n,onMouseDown:function(t){return e.onButtonEvent("info",!1)},onTouchStart:function(t){return e.onButtonEvent("info",!1)}}))}},{key:"render",value:function(){var e=this,t=this.keyLogger.renderPressed(),a=this.keyLogger.renderLogged(),n=this.renderMacros(),s=this.renderParameters(),i=this.renderInfo(),o=this.macroPlayer.state.playState;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("img",{className:"icon",src:"./images/macros.png",alt:"AppTitle"})),r.a.createElement("div",{id:"body"},r.a.createElement("div",{id:"Macros"},n),r.a.createElement("div",{id:"Parameters"},s,i),r.a.createElement("div",{id:"Tracker"},r.a.createElement(S,{key:"progressbar",percentage:this.state.macroProgress}),r.a.createElement("div",{id:"KeyLogging"},t,a)),r.a.createElement("div",{id:"PlayerButtons"},r.a.createElement(j,{id:"ResetButton",selected:o===g,name:"Reset",src:"./images/reset_icon.png",clickHandler:function(t){return e.onButtonEvent("reset")}}),r.a.createElement(j,{id:"PlayButton",selected:o===v,name:"Play",src:"./images/ACStylePlayIcon.png",clickHandler:function(t){return e.onButtonEvent("play")}}),r.a.createElement(j,{id:"PauseButton",selected:o===f,name:"Pause",src:"./images/ACStylePauseIcon.png",clickHandler:function(t){return e.onButtonEvent("pause")}}))))}}]),a}(n.Component);a(17);i.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.d109467e.chunk.js.map